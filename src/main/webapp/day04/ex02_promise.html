<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>fetch 비동기</title>
	</head>
	<body>
<!-- 
		fetch() : 네트워크의 리소스를 쉽게 비동기적으로 취득할 수 있다.
				요청과 응답 등의 요소를 JS에서 접근하고 조작할 수 있는 인터페이스를 제공
				** 서버로 부터 자원을 받아서 반환함 => response
 -->	
 		
 		<script type="text/javascript">
 		
 			const myPromise = fetch(`https:\\jsonplaceholder.typicode.com/todos?_limit=5`);
 			/* 
 			myPromise
 			.then((response) => {
 				console.log(`response : ` , response);
 			})
 			.catch((err) => {
 				console.log(`err : ` , err);
 			})
 			 */
 			/* status 200번 => 성공 */
 			
 			//	위와 같은 방법
 			fetch(`https:\\jsonplaceholder.typicode.com/todos?_limit=5`)
 			
 			.then((response) => {
 				//console.log(`response : ` , response);
 				
 				//	성공해서 가져온 response 이 json 이므로
 				//	response.json() 처리하면 
 				//	json 형식의 데이터도 처리할 수 있다.
 				return response.json();
 			})
 			.then((data) => {
 				//	첫번째 then 에서 return 한 정보를 받아서 처리할 수 있다. (chaining 방식)
 				//	data 란 위에서 넘어온 response.json() 을 의미한다.
 				console.log(`data : ` , data);
 				//	넘어온 데이터 배열을 하나씩 검사해서 id 가 3 보다 큰 데이터만 반환한다.
 				return data.filter(object => object.id > 3);
 			})
 			.then((result) => {
 				//	두번째 then 에서 return 한 정보를 받아서 처리 (체인 방식)
 				console.log(`result : ` , result);	
 			})
 			//	인자가 하나면 () 생략가능 , 한줄이면 {} 생략가능
 			.catch(err => console.log(`err : ` , err))
 			//	인자가 없으면 () 생략불가
 			.finally(() => console.log(`finally!!`))
 			
 		</script>		
 
	</body>
</html>